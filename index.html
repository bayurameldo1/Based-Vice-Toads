<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Based Vice Toads â€” Mint</title>

  <!-- Farcaster MiniApp Embed meta -->
  <meta name="fc:miniapp" content='{
    "version":"next",
    "imageUrl":"https://raw.githubusercontent.com/bayurameldo1/Based-Vice-Toads/refs/heads/main/images/bg1.jpg",
    "button":{"title":"Mint Now","action":{"type":"launch_miniapp","name":"Based Vice Toads","url":"https://vice-toads.vercel.app"}}
  }' />

  <style>
    :root{
      --accent: #7afcff;
      --dark: #030512;
      --muted: #9aa4b2;
      --maxw:1200px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#020217,#050319);font-family:Inter,system-ui,Arial;color:#fff;overflow:hidden}

    /* marquee bars */
    .marquee {
      position:fixed;left:0;right:0;height:36px;display:flex;align-items:center;overflow:hidden;
      background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      z-index:60;
    }
    .marquee.top{top:0}
    .marquee.bottom{bottom:0}
    .marquee .track {white-space:nowrap;display:inline-block;padding-left:100%;animation:marquee 14s linear infinite}
    @keyframes marquee { from { transform:translateX(0) } to { transform:translateX(-100%) } }
    .marquee .text{padding:0 24px;font-weight:700;color:var(--accent);letter-spacing:1px}

    /* layout container */
    .stage {
      position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
      gap:24px;max-width:var(--maxw);margin:0 auto;padding:64px 20px;
    }

    /* slideshow */
    .slideshow {position:absolute;inset:0;z-index:1;display:block;overflow:hidden}
    .slide {position:absolute;inset:0;opacity:0;transition:opacity 1s ease-in-out}
    .slide.active{opacity:1}
    .slide img{width:100%;height:100%;object-fit:cover;display:block;filter:contrast(1.02) saturate(1.05)}

    /* overlay panel (center) */
    .overlay {
      position:relative;z-index:30;display:flex;flex-direction:column;align-items:center;gap:16px;
      pointer-events:none;
      text-align:center;
      padding:16px 20px;
    }

    /* logos row */
    .logos {display:flex;gap:12px;align-items:center;pointer-events:auto}
    .logo-btn{width:44px;height:44px;border-radius:10px;background:rgba(0,0,0,0.35);display:flex;align-items:center;justify-content:center;border:1px solid rgba(255,255,255,0.04);cursor:pointer}
    .logo-btn svg{width:22px;height:22px;display:block}

    /* mint button container */
    .mint-wrap{background:rgba(0,0,0,0.35);backdrop-filter:blur(6px);padding:18px 26px;border-radius:18px;border:1px solid rgba(255,255,255,0.04);pointer-events:auto}
    .mint-btn{
      display:inline-block;background:var(--accent);color:#02121a;border:none;padding:10px 18px;border-radius:10px;font-weight:900;font-size:20px;cursor:pointer;
      overflow:hidden;position:relative;
    }

    /* wave text effect: letter spans animated with delay */
    .wave {display:inline-block;white-space:nowrap}
    .wave .char{display:inline-block;transform:translateY(0);animation:wave 1.4s ease-in-out infinite}
    .wave .char:nth-child(1){animation-delay:0s}
    .wave .char:nth-child(2){animation-delay:0.05s}
    .wave .char:nth-child(3){animation-delay:0.10s}
    .wave .char:nth-child(4){animation-delay:0.15s}
    .wave .char:nth-child(5){animation-delay:0.20s}
    .wave .char:nth-child(6){animation-delay:0.25s}
    .wave .char:nth-child(7){animation-delay:0.30s}
    .wave .char:nth-child(8){animation-delay:0.35s}
    .wave .char:nth-child(9){animation-delay:0.40s}
    .wave .char:nth-child(10){animation-delay:0.45s}
    .wave .char:nth-child(11){animation-delay:0.50s}
    .wave .char:nth-child(12){animation-delay:0.55s}
    .wave .char:nth-child(13){animation-delay:0.60s}
    .wave .char:nth-child(14){animation-delay:0.65s}
    .wave .char:nth-child(15){animation-delay:0.70s}
    @keyframes wave {
      0%,100%{transform:translateY(0)}
      50%{transform:translateY(-8px)}
    }

    /* subtle glow under text */
    .mint-btn .shadow {position:absolute;inset:0;filter:blur(10px);opacity:0.08;pointer-events:none}

    /* small note under button */
    .sub-note{color:var(--muted);font-size:13px;margin-top:6px}

    /* responsive */
    @media(max-width:820px){ .stage{padding:36px 12px} .mint-btn{font-size:18px} .logo-btn{width:40px;height:40px} }
    @media(max-width:480px){ .mint-btn{font-size:16px;padding:8px 14px} .mint-wrap{padding:12px 16px} }
  </style>
</head>
<body>
  <!-- top marquee -->
  <div class="marquee top" role="region" aria-label="announcement top">
    <div class="track"><span class="text">join the waitlist â€” join the waitlist â€” join the waitlist â€” </span></div>
  </div>

  <!-- slideshow stage -->
  <div class="stage" role="main">
    <div class="slideshow" id="slideshow" aria-hidden="true">
      <div class="slide active"><img src="https://raw.githubusercontent.com/bayurameldo1/Based-Vice-Toads/refs/heads/main/images/bg1.jpg" alt=""></div>
      <div class="slide"><img src="https://raw.githubusercontent.com/bayurameldo1/Based-Vice-Toads/blob/main/images/bg2.jpg?raw=true" alt=""></div>
      <div class="slide"><img src="https://raw.githubusercontent.com/bayurameldo1/Based-Vice-Toads/blob/main/images/bg3.jpg?raw=true" alt=""></div>
      <div class="slide"><img src="https://raw.githubusercontent.com/bayurameldo1/Based-Vice-Toads/blob/main/images/bg4.jpg?raw=true" alt=""></div>
    </div>

    <!-- center overlay with logos + animated mint text -->
    <div class="overlay" aria-hidden="false">
      <div class="logos" style="margin-bottom:8px">
        <!-- Farcaster logo (inline SVG) -->
        <a class="logo-btn" id="farcasterLink" title="Farcaster profile" href="https://farcaster.xyz/ameldoxg" target="_blank" rel="noopener noreferrer">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="#ffffff"/>
          </svg>
        </a>

        <!-- Base App logo (inline SVG) -->
        <a class="logo-btn" id="baseLink" title="Base profile" href="https://base.app/profile/0xbres" target="_blank" rel="noopener noreferrer">
          <!-- simple 'B' glyph -->
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
            <rect x="2" y="3" width="20" height="18" rx="3" fill="#ffffff"/>
            <path d="M9 7h4a2 2 0 110 4H9V7zm0 6h5a2 2 0 110 4H9v-4z" fill="#02121a"/>
          </svg>
        </a>
      </div>

      <div class="mint-wrap" role="region" aria-label="mint call to action">
        <button class="mint-btn" id="mintBtn" aria-label="Mint Now">
          <span class="shadow"></span>
          <span class="wave" id="waveText" aria-hidden="true"></span>
        </button>
        <div class="sub-note">Click to mint â€” limited supply</div>
      </div>
    </div>
  </div>

  <!-- bottom marquee -->
  <div class="marquee bottom" role="region" aria-label="announcement bottom">
    <div class="track"><span class="text">join the waitlist â€” join the waitlist â€” join the waitlist â€” </span></div>
  </div>

  <script>
    // Build wave text "MINT NOW" by wrapping letters to animate
    const text = "MINT NOW";
    const wave = document.getElementById('waveText');
    wave.innerHTML = '';
    for (let i = 0; i < text.length; i++) {
      const ch = document.createElement('span');
      ch.className = 'char';
      ch.textContent = text[i] === ' ' ? '\u00A0' : text[i];
      wave.appendChild(ch);
    }

    // Slideshow logic
    (function(){
      const slides = Array.from(document.querySelectorAll('.slide'));
      let idx = 0;
      const interval = 4000;
      setInterval(()=> {
        slides[idx].classList.remove('active');
        idx = (idx + 1) % slides.length;
        slides[idx].classList.add('active');
      }, interval);
    })();

    // Links
    const MINT_URL = 'https://opensea.io/collection/based-vice-toads/overview';
    const MARKET_URL = 'https://opensea.io/collection/based-vice-toads/';
    document.getElementById('mintBtn').addEventListener('click', function(){
      try { window.parent.postMessage({ type: 'open_url', url: MINT_URL }, '*'); } catch(e){}
      window.open(MINT_URL, '_blank');
    });

    document.getElementById('farcasterLink').addEventListener('click', function(){
      try { window.parent.postMessage({ type: 'open_url', url: this.href }, '*'); } catch(e){}
      // default anchor will open new tab
    });
    document.getElementById('baseLink').addEventListener('click', function(){
      try { window.parent.postMessage({ type: 'open_url', url: this.href }, '*'); } catch(e){}
    });

    // Miniapp ready handshake: try SDK then fallback postMessage
    (async function readyHandshake(){
      try {
        const mod = await import('https://cdn.jsdelivr.net/npm/@farcaster/miniapp-sdk/dist/index.min.js');
        const sdk = mod.sdk ?? mod.default ?? null;
        if (sdk && sdk.actions && typeof sdk.actions.ready === 'function') {
          await sdk.actions.ready();
          console.log('ðŸ“£ sdk.actions.ready() called');
        }
      } catch(e){
        console.warn('SDK import failed (ok in embed):', e?.message || e);
      }
      try {
        const payload = { type: 'miniapp_ready', source: 'based-vice-toads', ts: Date.now() };
        window.parent.postMessage(payload, '*');
        console.log('[miniapp_ready]', payload);
      } catch(e){ console.warn('postMessage failed', e) }
    })();
  </script>
</body>
</html>
